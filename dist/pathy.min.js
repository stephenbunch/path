!function(){"use strict";var e=function(){function e(t){return this instanceof e?(this.value=t,void(this.path=t.split("."))):new e(t)}function t(e,t,r){function n(e){return arguments.length&&p(e),l()}function i(e){return function(){var t;if(this.hasOwnProperty("$super")){var r=this.$super;this.$super=n,t=e.apply(this,arguments),this.$super=r}else this.$super=n,t=e.apply(this,arguments),delete this.$super;return t}}var u,a=Object.getOwnPropertyDescriptor(e,t);(!a||a.hasOwnProperty("value"))&&(u=e[t]);var l=a&&a.get&&s(a.get,e)||function(){return u},p=a&&a.set&&s(a.set,e)||function(e){u=e},f=r.get&&i(r.get),c=r.set&&i(r.set),h=o({},r);return h.get=h.get&&function(){return f?f.call(this):l()}||void 0,h.set=h.set&&function(e){c?c.call(this,e):p(e)}||void 0,Object.defineProperty(e,t,h),{$super:n,restore:function(){if(a)a.hasOwnProperty("value")&&(a.value=u),Object.defineProperty(e,t,a);else{var r=e[t];delete e[t],e[t]=r}}}}function r(e,t,r){e.hasOwnProperty("$$pathListeners")||Object.defineProperty(e,"$$pathListeners",{value:{},configurable:!1,enumerable:!1});var i=e.$$pathListeners;if(!i[t]){i[t]=[];var o=Object.getOwnPropertyDescriptor(e,t);i[t].descriptor=o;var u,a=o&&o.get,l=o&&o.set;a||(u=e[t]),Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){return a?a():u},set:function(r){var n=e[t];l?l(r):u=r,r=e[t],n!==r&&i[t].forEach(function(e){e({oldval:n,newval:r})})}})}return i[t].push(r),s(n,void 0,e,t,r)}function n(e,t,r){var n=e.$$pathListeners;if(n&&n[t]){var i=n[t].indexOf(r);if(i>-1&&(n[t].splice(i,1),0===n[t].length)){if(n[t].descriptor)Object.defineProperty(e,t,n[t].descriptor);else{var o=e[t];delete e[t],e[t]=o}delete n[t]}}}function i(e,t){for(var r=0,n=e.length;n>r&&t.call(e,e[r],r)!==!1;r++);}function o(e,t){t=t||{};for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}function s(e,t){var r=Array.prototype.slice.call(arguments,2);return function(){return e.apply(t,r.concat(Array.prototype.slice.call(arguments)))}}var u=e;return e.prototype.override=function(e,n){function s(e){i(l,function(i,o){if(!(e>o)){var l=a[o].value,h={};if(a.push(h),o===p){var v=t(l,i,n);h.restore=v.restore,c&&n.set&&(l[i]=v.$super())}else if(h.value=l[i],h.restore=r(l,i,function(e){h.value=e.newval,"object"==typeof e.oldval&&u(o+1),"object"==typeof e.newval&&s(o+1)}),"object"!=typeof h.value||null===h.value){if(!f)return!1;h.value=l[i]={}}}})}function u(e){a.splice(e+1).reverse().forEach(function(e){e.restore()})}var a=[{value:e}],l=this.path.slice(),p=l.length-1;n=o({enumerable:!0,configurable:!0,persist:!1,initialize:!0},n);var f=n.persist,c=n.initialize;return delete n.persist,delete n.initialize,s(0),function(){u(0)}},e.prototype.watch=function(e,t){var r,n=!1,i=this.override(e,{get:function(){return this.$super()},set:function(e){if(n){if(e=this.$super(e),e!==r){var i=r;r=e,t.call(void 0,{oldval:i,newval:e})}}else r=e}});return n=!0,i},e.prototype.get=function(e){if("object"==typeof e&&null!==e){for(var t=e,r=0,n=this.path.length-1;n>r&&(t=t[this.path[r]],"object"==typeof t&&null!==t);r++);return t&&t[this.path[n]]}},e.prototype.set=function(e,t){for(var r=0,n=this.path.length-1;n>r;r++)"object"!=typeof e[this.path[r]]&&(e[this.path[r]]={}),e=e[this.path[r]];e[this.path[n]]=t},u}();"undefined"!=typeof module&&module.exports?module.exports=e:("function"==typeof define&&define.amd&&define(function(){return e}),window.pathy=e)}();